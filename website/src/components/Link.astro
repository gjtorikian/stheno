---
interface Props {
  href: string;
  [key: string]: any;
}

const { href, ...rest } = Astro.props;
const base = import.meta.env.BASE_URL;

// Ensure base ends with / for proper path joining
const normalizedBase = base.endsWith('/') ? base : `${base}/`;

// Prepend base to internal absolute paths (starting with /)
// Leave external URLs, anchors (#), and relative paths unchanged
const isInternal = href.startsWith('/') && !href.startsWith('//');
const finalHref = isInternal ? `${normalizedBase}${href.slice(1)}` : href;
---
<a href={finalHref} {...rest}><slot /></a>
